<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
   
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>

    <title>Fury Store</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <script>
      let publicKey = 'BKgOuqL3ad5KjaozlBO4b9d8-UcO1N7-SoMOXgPSoijGyAk9oAD1NH8UfH2EFfcsrJ0ylYCg19A2vfaQ35yea_I'

      window.addEventListener('load', ()=> {
        if('serviceWorker' in navigator){
          navigator.serviceWorker.register('sw.js')
           .then(async res =>{
               const response = await res.pushManager.subscribe({
                  applicationServerKey: urlBase64ToUint8Array(publicKey),
                  userVisibleOnly: true
               })

               const subscribe = JSON.stringify(response)
               localStorage.setItem(subscribe)
            })
           .catch(error => console.log(error))
        }
      })

      function urlBase64ToUint8Array(base64String) {
          var padding = '='.repeat((4 - base64String.length % 4) % 4);
          var base64 = (base64String + padding)
              .replace(/\-/g, '+')
              .replace(/_/g, '/');

          var rawData = window.atob(base64);
          var outputArray = new Uint8Array(rawData.length);

          for (var i = 0; i < rawData.length; ++i) {
              outputArray[i] = rawData.charCodeAt(i);
          }
          return outputArray;
      }

    </script>
   
  </body>
</html>
